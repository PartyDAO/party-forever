import type { ProposalData } from "@party-forever/contracts";
import { BytecodeProposalType, ProposalType } from "@party-forever/contracts";
import { AlertCircle, Code2, Music, PieChart, Settings, ShoppingBag, UserPlus } from "lucide-react";

const DEFAULT_ICON = Code2;

const DistributionIcon = ({ className }: { className?: string }) => (
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    className={className}
    aria-hidden
  >
    <path
      d="M12 1.5C11.2666 1.5 10.5491 1.57191 9.85431 1.70935C9.31253 1.81653 8.96021 2.34262 9.06739 2.88441C9.17457 3.42619 9.70066 3.77851 10.2424 3.67133C10.8101 3.55903 11.3977 3.5 12 3.5C12.6023 3.5 13.1899 3.55903 13.7576 3.67133C14.2993 3.77851 14.8254 3.42619 14.9326 2.88441C15.0398 2.34262 14.6875 1.81653 14.1457 1.70935C13.4509 1.57191 12.7334 1.5 12 1.5Z"
      fill="#A7B8CF"
    />
    <path
      d="M18.1125 3.35338C17.6535 3.04613 17.0324 3.16909 16.7252 3.62803C16.4179 4.08696 16.5409 4.70807 16.9998 5.01531C17.9817 5.67268 18.8273 6.51827 19.4847 7.50016C19.7919 7.95909 20.413 8.08206 20.872 7.77481C21.3309 7.46756 21.4539 6.84645 21.1466 6.38752C20.3438 5.18839 19.3116 4.15618 18.1125 3.35338Z"
      fill="#A7B8CF"
    />
    <path
      d="M7.00016 5.01531C7.45909 4.70807 7.58206 4.08696 7.27481 3.62803C6.96756 3.1691 6.34645 3.04613 5.88752 3.35338C4.68839 4.15618 3.65618 5.18839 2.85338 6.38752C2.54613 6.84646 2.66909 7.46757 3.12803 7.77481C3.58696 8.08206 4.20807 7.95909 4.51531 7.50016C5.17268 6.51827 6.01827 5.67268 7.00016 5.01531Z"
      fill="#A7B8CF"
    />
    <path
      d="M22.7906 10.3543C22.6835 9.81253 22.1574 9.46021 21.6156 9.56739C21.0738 9.67457 20.7215 10.2007 20.8287 10.7424C20.941 11.3101 21 11.8977 21 12.5C21 13.1023 20.941 13.6899 20.8287 14.2576C20.7215 14.7993 21.0738 15.3254 21.6156 15.4326C22.1574 15.5398 22.6835 15.1875 22.7906 14.6457C22.9281 13.9509 23 13.2334 23 12.5C23 11.7666 22.9281 11.0491 22.7906 10.3543Z"
      fill="#A7B8CF"
    />
    <path
      d="M3.17133 10.7424C3.27851 10.2007 2.92619 9.67457 2.38441 9.56739C1.84262 9.46021 1.31653 9.81253 1.20935 10.3543C1.07191 11.0491 1 11.7666 1 12.5C1 13.2334 1.07191 13.9509 1.20935 14.6457C1.31653 15.1875 1.84262 15.5398 2.38441 15.4326C2.92619 15.3254 3.27851 14.7993 3.17133 14.2576C3.05903 13.6899 3 13.1023 3 12.5C3 11.8977 3.05903 11.3101 3.17133 10.7424Z"
      fill="#A7B8CF"
    />
    <path
      d="M4.51531 17.4998C4.20807 17.0409 3.58696 16.9179 3.12803 17.2252C2.6691 17.5324 2.54613 18.1535 2.85338 18.6125C3.65618 19.8116 4.68839 20.8438 5.88752 21.6466C6.34646 21.9539 6.96757 21.8309 7.27481 21.372C7.58206 20.913 7.45909 20.2919 7.00016 19.9847C6.01827 19.3273 5.17268 18.4817 4.51531 17.4998Z"
      fill="#A7B8CF"
    />
    <path
      d="M21.1466 18.6125C21.4539 18.1535 21.3309 17.5324 20.872 17.2252C20.413 16.9179 19.7919 17.0409 19.4847 17.4998C18.8273 18.4817 17.9817 19.3273 16.9998 19.9847C16.5409 20.2919 16.4179 20.913 16.7252 21.372C17.0324 21.8309 17.6535 21.9539 18.1125 21.6466C19.3116 20.8438 20.3438 19.8116 21.1466 18.6125Z"
      fill="#A7B8CF"
    />
    <path
      d="M10.2424 21.3287C9.70066 21.2215 9.17457 21.5738 9.06739 22.1156C8.96021 22.6574 9.31253 23.1835 9.85431 23.2906C10.5491 23.4281 11.2666 23.5 12 23.5C12.7334 23.5 13.4509 23.4281 14.1457 23.2906C14.6875 23.1835 15.0398 22.6574 14.9326 22.1156C14.8254 21.5738 14.2993 21.2215 13.7576 21.3287C13.1899 21.441 12.6023 21.5 12 21.5C11.3977 21.5 10.8101 21.441 10.2424 21.3287Z"
      fill="#A7B8CF"
    />
    <path
      d="M16.9497 7.55018C16.2799 6.88034 15.506 6.37333 14.679 6.03116C14.1687 5.82001 13.5838 6.06255 13.3726 6.57288C13.1615 7.08321 13.404 7.66808 13.9144 7.87922C14.5027 8.12265 15.0548 8.4837 15.5355 8.9644C16.0162 9.44509 16.3773 9.99722 16.6207 10.5856C16.8319 11.0959 17.4167 11.3384 17.9271 11.1273C18.4374 10.9161 18.6799 10.3313 18.4688 9.82094C18.1266 8.99392 17.6196 8.22002 16.9497 7.55018Z"
      fill="#A7B8CF"
    />
    <path
      d="M18.4688 15.1789C18.6799 14.6686 18.4374 14.0837 17.9271 13.8726C17.4167 13.6614 16.8319 13.904 16.6207 14.4143C16.3773 15.0026 16.0162 15.5548 15.5355 16.0355C15.0548 16.5162 14.5027 16.8772 13.9144 17.1206C13.404 17.3318 13.1615 17.9167 13.3726 18.427C13.5838 18.9373 14.1687 19.1798 14.679 18.9687C15.506 18.6265 16.2799 18.1195 16.9497 17.4497C17.6196 16.7798 18.1266 16.0059 18.4688 15.1789Z"
      fill="#A7B8CF"
    />
    <path
      d="M10.0856 7.87922C10.596 7.66808 10.8385 7.08321 10.6274 6.57288C10.4162 6.06255 9.83134 5.82001 9.32101 6.03116C8.49399 6.37333 7.72009 6.88034 7.05025 7.55018C6.38041 8.22002 5.8734 8.99393 5.53123 9.82094C5.32008 10.3313 5.56262 10.9161 6.07295 11.1273C6.58328 11.3384 7.16815 11.0959 7.37929 10.5856C7.62272 9.99722 7.98377 9.44509 8.46447 8.9644C8.94516 8.4837 9.49729 8.12265 10.0856 7.87922Z"
      fill="#A7B8CF"
    />
    <path
      d="M7.3793 14.4143C7.16815 13.904 6.58328 13.6614 6.07295 13.8726C5.56262 14.0837 5.32008 14.6686 5.53123 15.1789C5.8734 16.0059 6.38041 16.7798 7.05025 17.4497C7.72009 18.1195 8.494 18.6265 9.32101 18.9687C9.83134 19.1798 10.4162 18.9373 10.6274 18.427C10.8385 17.9167 10.596 17.3318 10.0856 17.1206C9.49729 16.8772 8.94516 16.5162 8.46447 16.0355C7.98377 15.5548 7.62272 15.0026 7.3793 14.4143Z"
      fill="#A7B8CF"
    />
  </svg>
);

const UpgradeProposalEngineIcon = ({ className }: { className?: string }) => (
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    className={className}
    aria-hidden
  >
    <path
      d="M8.13944 9.76744C7.95763 10.7092 7.64532 12.4532 7.53601 14.5755C9.42771 15.5421 11.0937 16.1436 11.9998 16.4567C12.9062 16.1436 14.5719 15.5421 16.4636 14.5755C16.3543 12.4532 16.0423 10.7092 15.8602 9.76744C15.1359 9.13887 13.7822 7.99628 11.9994 6.84067C10.2167 7.99628 8.86332 9.13887 8.13869 9.76744H8.13944Z"
      fill="#A7B8CF"
    />
    <path
      d="M18.5902 3.40769C18.5902 3.40769 19.2431 3.17709 20.0001 3.05137C17.9653 1.22888 15.3051 0.0911246 12.3813 0C12.9118 0.567204 13.4052 1.33228 13.8521 2.20187C15.327 2.38003 17.1094 2.75903 18.5902 3.40843V3.40769Z"
      fill="#A7B8CF"
    />
    <path
      d="M16.4249 18.1C14.7805 17.782 13.1881 17.3263 11.9998 16.8908C10.8116 17.3263 9.21916 17.782 7.57471 18.1C7.66914 19.298 7.8569 20.5354 8.17962 21.7606C8.17962 21.7606 9.41398 23.2186 11.9998 24C14.5857 23.2186 15.82 21.7606 15.82 21.7606C16.1427 20.5354 16.3305 19.2976 16.4249 18.1Z"
      fill="#A7B8CF"
    />
    <path
      d="M5.40975 3.40769V3.40843C6.89099 2.75903 8.67338 2.38003 10.1483 2.20187C10.5952 1.33228 11.0886 0.567576 11.6191 0C8.69494 0.0911246 6.03511 1.22888 4.00027 3.05137C4.75688 3.17709 5.40975 3.40769 5.40975 3.40769Z"
      fill="#A7B8CF"
    />
    <path
      d="M1.63787 10.4254C2.53725 11.3177 3.5147 12.0991 4.50442 12.7798C5.60159 11.5141 6.79245 10.3622 7.76359 9.55061C7.98071 8.3035 8.38225 6.69599 8.92954 5.11265C7.84538 4.59529 6.68017 4.13929 5.45808 3.80641V3.80566C5.45808 3.80566 3.57828 4.14599 1.60887 5.99563C0.992437 8.62634 1.6375 10.425 1.6375 10.425V10.4258L1.63787 10.4254Z"
      fill="#A7B8CF"
    />
    <path
      d="M22.3626 10.4247C22.3626 10.4247 23.0076 8.62635 22.3912 5.99526C20.4218 4.14599 18.5424 3.8053 18.5424 3.8053V3.80604C17.3199 4.13893 16.1547 4.59529 15.0705 5.11229C15.6174 6.69562 16.0194 8.30314 16.2365 9.55024C17.2076 10.3618 18.3981 11.5137 19.4956 12.7794C20.4854 12.0988 21.4632 11.3173 22.3622 10.425V10.4243L22.3626 10.4247Z"
      fill="#A7B8CF"
    />
    <path
      d="M1.26941 10.582C1.26941 10.582 0.74332 10.1316 0.256267 9.53871C-0.30403 12.2129 0.0409972 15.0862 1.42408 17.6652C1.64976 16.9217 2.06543 16.112 2.59486 15.29C2.01189 13.9231 1.44862 12.1895 1.27053 10.582H1.26978H1.26941Z"
      fill="#A7B8CF"
    />
    <path
      d="M7.85951 22.0008V22.0001C6.55748 21.042 5.33799 19.687 4.44642 18.4987C3.47008 18.5463 2.56141 18.5013 1.80481 18.3253C3.3459 20.8129 5.66071 22.5487 8.25584 23.4004C7.98629 22.6822 7.85951 22.0012 7.85951 22.0012V22.0008Z"
      fill="#A7B8CF"
    />
    <path
      d="M22.7306 10.582C22.7306 10.582 23.2567 10.1316 23.7437 9.53871C24.304 12.2129 23.959 15.0862 22.5759 17.6652C22.3503 16.9217 21.9346 16.112 21.4052 15.29C21.9881 13.9231 22.5514 12.1895 22.7295 10.582H22.7302H22.7306Z"
      fill="#A7B8CF"
    />
    <path
      d="M16.1405 22.0008V22.0001C17.4425 21.042 18.662 19.687 19.5536 18.4987C20.5299 18.5463 21.4386 18.5013 22.1952 18.3253C20.6541 20.8129 18.3393 22.5487 15.7441 23.4004C16.0137 22.6822 16.1405 22.0012 16.1405 22.0012V22.0008Z"
      fill="#A7B8CF"
    />
    <path
      d="M12.0002 1.46953L8.70569 3.42555L9.714 6.55242H14.286L15.2943 3.42555L12.0002 1.46953Z"
      fill="#A7B8CF"
    />
    <path
      d="M2.88635 17.2605L6.22694 19.1365L8.42983 16.6992L6.14403 12.7385L2.93283 13.4284L2.88635 17.2605Z"
      fill="#A7B8CF"
    />
    <path
      d="M21.1136 17.2605L21.0675 13.4284L17.856 12.7385L15.5702 16.6992L17.7731 19.1365L21.1136 17.2605Z"
      fill="#A7B8CF"
    />
  </svg>
);

const PROPOSAL_TYPE_ICONS: Record<ProposalType, React.ComponentType<{ className?: string }>> = {
  Invalid: AlertCircle,
  ListOnOpensea: ShoppingBag,
  ListOnZora: Music,
  Fractionalize: PieChart,
  ArbitraryCalls: Code2,
  UpgradeProposalEngineImpl: UpgradeProposalEngineIcon,
  ListOnOpenseaAdvanced: ShoppingBag,
  Distribute: DistributionIcon,
  AddAuthority: UserPlus,
  Operator: Settings
};

const TransferIcon = ({ className }: { className?: string }) => (
  <svg
    width="24"
    height="24"
    viewBox="0 0 16 16"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    className={className}
    aria-hidden
  >
    <path
      d="M10.6309 11.2995C10.6309 11.6677 10.9294 11.9662 11.2976 11.9662C11.6658 11.9662 11.9642 11.6677 11.9642 11.2995V4.69987C11.9642 4.33168 11.6658 4.0332 11.2976 4.0332L4.69792 4.0332C4.32973 4.0332 4.03125 4.33168 4.03125 4.69987C4.03125 5.06806 4.32973 5.36654 4.69792 5.36654L9.6881 5.36654L4.22651 10.8281C3.96616 11.0885 3.96616 11.5106 4.22651 11.7709C4.48686 12.0313 4.90897 12.0313 5.16932 11.7709L10.6309 6.30935V11.2995Z"
      fill="currentColor"
    />
  </svg>
);

interface ProposalTypeIconProps {
  proposalType: ProposalType;
  proposalData?: ProposalData;
  className?: string;
}

export const ProposalTypeIcon = ({
  proposalType,
  proposalData,
  className
}: ProposalTypeIconProps) => {
  const isTransferArbitrary =
    proposalType === ProposalType.ArbitraryCalls &&
    proposalData &&
    "annotatedDetails" in proposalData &&
    proposalData.annotatedDetails &&
    (proposalData.annotatedDetails.bytecodeProposalType === BytecodeProposalType.TokenTransfer ||
      proposalData.annotatedDetails.bytecodeProposalType === BytecodeProposalType.NftTransfer);

  const Icon = isTransferArbitrary
    ? TransferIcon
    : (PROPOSAL_TYPE_ICONS[proposalType] ?? DEFAULT_ICON);
  return <Icon className={className} aria-hidden />;
};
